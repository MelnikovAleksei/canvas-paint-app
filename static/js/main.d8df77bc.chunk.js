(this["webpackJsonpcanvas-paint-app"]=this["webpackJsonpcanvas-paint-app"]||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(3),i=n.n(a),s=n(9),r=n.n(s),c=(n(15),n(10)),l=n(0),o=n(1),u=n(6),p=n(8),d=n(2),f=p.a.generator();function h(e,t,n,a,i,s){var r;switch(s){case"line":r=f.line(t,n,a,i);break;case"rectangle":r=f.rectangle(t,n,a-t,i-n)}return{id:e,x1:t,y1:n,x2:a,y2:i,type:s,roughElement:r}}var y=function(e,t,n,a,i){return Math.abs(e-n)<5&&Math.abs(t-a)<5?i:null},x=function(e,t,n){var a=n.type,i=n.x1,s=n.x2,r=n.y1,c=n.y2;switch(a){case"rectangle":var l=y(e,t,i,r,"top-left"),o=y(e,t,s,r,"top-right"),u=y(e,t,i,c,"bottom-left"),p=y(e,t,s,c,"bottom-right");return l||o||u||p||(e>=i&&e<=s&&t>=r&&t<=c?"inside":null);case"line":var d={x:i,y:r},f={x:s,y:c},h={x:e,y:t},x=v(d,f)-(v(d,h)+v(f,h)),b=y(e,t,i,r,"start"),m=y(e,t,s,c,"end"),g=Math.abs(x)<1?"inside":null;return b||m||g}},v=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},b=function(e,t,n){return n.map((function(n){return Object(u.a)(Object(u.a)({},n),{},{position:x(e,t,n)})})).find((function(e){return null!==e.position}))};var m=function(){var e=i.a.useState([]),t=Object(o.a)(e,2),n=t[0],a=t[1],s=i.a.useState("none"),r=Object(o.a)(s,2),f=r[0],y=r[1],x=i.a.useState("line"),v=Object(o.a)(x,2),m=v[0],g=v[1],j=i.a.useState(null),w=Object(o.a)(j,2),O=w[0],M=w[1];i.a.useLayoutEffect((function(){var e=document.querySelector("#canvas");e.getContext("2d").clearRect(0,0,e.width,e.height);var t=p.a.canvas(e);n.forEach((function(e){var n=e.roughElement;return t.draw(n)}))}),[n]);var _=function(e,t,i,s,r,c){var o=h(e,t,i,s,r,c),u=Object(l.a)(n);u[e]=o,a(u)},N=function(e){var t,i;if("mousedown"===e.type?(t=e.clientX,i=e.clientY):(t=e.touches[0].clientX,i=e.touches[0].clientY),"selection"===m){var s=b(t,i,n);if(s){var r=t-s.x1,c=i-s.y1;M(Object(u.a)(Object(u.a)({},s),{},{offsetX:r,offsetY:c})),"inside"===s.position?y("moving"):y("resizing")}}else{var o=h(n.length,t,i,t,i,m);a((function(e){return[].concat(Object(l.a)(e),[o])})),M(o),y("drawing")}},C=function(e){var t,a;if("mousemove"===e.type?(t=e.clientX,a=e.clientY):(t=e.touches[0].clientX,a=e.touches[0].clientY),"selection"===m){var i=b(t,a,n);e.target.style.cursor=i?function(e){switch(e){case"top-left":case"bottom-right":case"start":case"end":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";default:return"move"}}(i.position):"default"}if("drawing"===f){var s=n.length-1,r=n[s],l=r.x1,o=r.y1;_(s,l,o,t,a,m)}else if("moving"===f){var u=O.id,p=O.x1,d=O.x2,h=O.y1,y=O.y2,x=O.type,v=t-O.offsetX,g=a-O.offsetY;_(u,v,g,v+(d-p),g+(y-h),x)}else if("resizing"===f){var j=O.id,w=O.type,M=function(e,t,n,a){var i=a.x1,s=a.y1,r=a.x2,c=a.y2;switch(n){case"top-left":case"start":return{x1:e,y1:t,x2:r,y2:c};case"bottom-left":return{x1:e,x2:r,y2:t};case"top-right":return{x1:i,x2:e,y1:t,y2:c};case"bottom-right":case"end":return{x1:i,x2:e,y1:s,y2:t};default:return null}}(t,a,O.position,Object(c.a)(O,["id","type","position"])),N=M.x1,C=M.y1,S=M.x2,E=M.y2;_(j,N,C,S,E,w)}},S=function(){if("drawing"===f||"resizing"===f){var e=O.id,t=n[e],a=(t.id,t.type),i=function(e){var t=e.type,n=e.x1,a=e.y1,i=e.x2,s=e.y2;switch(t){case"rectangle":return{x1:Math.min(n,i),x2:Math.max(n,i),y1:Math.min(a,s),y2:Math.max(a,s)};case"line":return n<i||n===i&&a<s?{x1:n,y1:a,x2:i,y2:s}:{x1:i,y1:s,x2:n,y2:a}}}(n[e]),s=i.x1,r=i.y1,c=i.x2,l=i.y2;_(e,s,r,c,l,a)}y("none"),M(null)},E=function(e){var t=e.target.value;g(t)},X=[{id:1,type:"radio",value:"line",label:"Line",inputClassName:"paint__input",labelClassName:"paint__label"},{id:2,type:"radio",value:"rectangle",label:"Rectangle",inputClassName:"paint__input",labelClassName:"paint__label"},{id:3,type:"radio",value:"selection",label:"Selection",inputClassName:"paint__input",labelClassName:"paint__label"}].map((function(e){return Object(d.jsxs)("label",{className:e.labelClassName,children:[e.label,Object(d.jsx)("input",{type:e.type,checked:m===e.value,onChange:E,value:e.value,className:e.inputClassName})]},e.id)}));return Object(d.jsxs)("div",{className:"paint",children:[Object(d.jsx)("form",{children:Object(d.jsxs)("fieldset",{className:"paint__inputs-fieldset",children:[Object(d.jsx)("legend",{className:"paint__inputs-legent",children:"Shapes:"}),X]})}),Object(d.jsx)("canvas",{id:"canvas",width:window.innerWidth,height:window.innerHeight,onMouseDown:N,onTouchStart:N,onTouchMove:C,onMouseMove:C,onMouseUp:S,onTouchEnd:S})]})};var g=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(m,{})})};r.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(g,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.d8df77bc.chunk.js.map