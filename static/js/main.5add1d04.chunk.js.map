{"version":3,"sources":["components/Paint/Paint.js","components/App/App.js","index.js"],"names":["generator","rough","createElement","id","x1","y1","x2","y2","type","roughElement","line","rectangle","distance","a","b","Math","sqrt","pow","x","y","getElementAtPosition","elements","find","element","minX","min","maxX","max","minY","maxY","c","offset","abs","isWithinElement","Paint","React","useState","setElements","action","setAction","tool","setTool","selectedElement","setSelectedElement","useLayoutEffect","canvas","document","querySelector","getContext","clearRect","width","height","roughCanvas","forEach","draw","updateElement","updatedElement","elementsCopy","handleChangeTool","evt","value","target","typesElementsInputsMarkup","label","inputClassName","labelClassName","map","item","className","checked","onChange","window","innerWidth","innerHeight","onMouseDown","clientX","clientY","offsetX","offsetY","length","prevState","onMouseMove","style","cursor","index","newX1","newY1","onMouseUp","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5add1d04.chunk.js","sourcesContent":["import React from 'react';\nimport rough from 'roughjs/bundled/rough.esm';\n\nconst generator = rough.generator();\n\nfunction createElement(id, x1, y1, x2, y2, type) {\n\tlet roughElement;\n\n\tswitch (type) {\n\t\tcase 'line':\n\t\t\troughElement = generator.line(x1, y1, x2, y2);\n\t\t\tbreak;\n\t\tcase 'rectangle':\n\t\t\troughElement = generator.rectangle(x1, y1, x2 - x1, y2 - y1);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t};\n\n\treturn { id, x1, y1, x2, y2, type, roughElement };\n}\n\nconst isWithinElement = (x, y, element) => {\n\tconst { type, x1, x2, y1, y2 } = element;\n\n\tswitch (type) {\n\t\tcase 'rectangle':\n\t\t\tconst minX = Math.min(x1, x2);\n\t\t\tconst maxX = Math.max(x1, x2);\n\t\t\tconst minY = Math.min(y1, y2);\n\t\t\tconst maxY = Math.max(y1, y2);\n\t\t\treturn x >= minX && x <= maxX && y >= minY && y <= maxY;\n\t\tcase 'line':\n\t\t\tconst a = { x: x1, y: y1 };\n\t\t\tconst b = { x: x2, y: y2 };\n\t\t\tconst c = { x, y };\n\t\t\tconst offset = distance(a, b) - (distance(a, c) + distance(b, c));\n\t\t\treturn Math.abs(offset) < 1;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n}\n\nconst distance = (a, b) => {\n\t// Pythagoras Theorem a2 + b2 = c2\n\treturn Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n}\n\nconst getElementAtPosition = (x, y, elements) => {\n\treturn elements.find(element => isWithinElement(x, y, element));\n}\n\nfunction Paint() {\n\n\tconst [elements, setElements] = React.useState([]);\n\tconst [action, setAction] = React.useState('none');\n\tconst [tool, setTool] = React.useState('line');\n\tconst [selectedElement, setSelectedElement] = React.useState(null);\n\n\tReact.useLayoutEffect(() => {\n\t\tconst canvas = document.querySelector('#canvas');\n\t\tconst context = canvas.getContext('2d');\n\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\tconst roughCanvas = rough.canvas(canvas);\n\n\t\telements.forEach(({ roughElement }) => roughCanvas.draw(roughElement));\n\t}, [elements]);\n\n\tconst updateElement = (id, x1, y1, x2, y2, type) => {\n\t\tconst updatedElement = createElement(id, x1, y1, x2, y2, type);\n\t\n\t\tconst elementsCopy = [...elements];\n\t\telementsCopy[id] = updatedElement;\n\t\tsetElements(elementsCopy);\n\t};\n\n\tconst handleMouseDown = (evt) => {\n\t\tconst { clientX, clientY } = evt;\n\n\t\tif (tool === 'selection') {\n\t\t\tconst element = getElementAtPosition(clientX, clientY, elements);\n\t\t\tif (element) {\n\t\t\t\tconst offsetX = clientX - element.x1;\n\t\t\t\tconst offsetY = clientY - element.y1;\n\t\t\t\tsetSelectedElement({...element, offsetX, offsetY});\n\t\t\t\tsetAction('moving');\n\t\t\t}\n\t\t} else {\n\t\t\tconst id = elements.length;\n\t\t\tconst element = createElement(id, clientX, clientY, clientX, clientY, tool);\n\t\n\t\t\tsetElements((prevState) => [...prevState, element]);\n\n\t\t\tsetAction('drawing');\n\t\t}\n\t};\n\n\tconst handleMouseMove = (evt) => {\n\t\tconst { clientX, clientY } = evt;\n\n\t\tif (tool === 'selection') {\n\t\t\tevt.target.style.cursor = getElementAtPosition(clientX, clientY, elements) ? \"move\" : \"default\";\n\t\t}\n\n\t\tif (action === 'drawing') {\n\n\t\t\tconst index = elements.length - 1;\n\t\t\tconst { x1, y1 } = elements[index];\n\t\t\t\n\t\t\tupdateElement(index, x1, y1, clientX, clientY, tool);\n\n\t\t} else if (action === 'moving') {\n\n\t\t\tconst { id, x1, x2, y1, y2, type, offsetX, offsetY } = selectedElement;\n\n\t\t\tconst width = x2 -x1;\n\t\t\tconst height = y2 -y1;\n\n\t\t\tconst newX1 = clientX - offsetX;\n\t\t\tconst newY1 = clientY - offsetY;\n\t\t\t\n\t\t\tupdateElement(id, newX1, newY1, newX1 + width, newY1 + height, type)\n\t\t\t\n\t\t}\n\t};\n\n\tconst handleMouseUp = (evt) => {\n\t\tsetAction('none');\n\t\tsetSelectedElement(null);\n\t};\n\n\n\tconst handleChangeTool = (evt) => {\n\t\tconst target = evt.target;\n\t\tconst value = target.value;\n\t\tsetTool(value);\n\t}\n\n\tconst typesElementsInputsData = [\n\t\t{\n\t\t\tid: 1,\n\t\t\ttype: 'radio',\n\t\t\tvalue: 'line',\n\t\t\tlabel: 'Line',\n\t\t\tinputClassName: 'paint__input',\n\t\t\tlabelClassName: 'paint__label',\n\t\t},\n\t\t{\n\t\t\tid: 2,\n\t\t\ttype: 'radio',\n\t\t\tvalue: 'rectangle',\n\t\t\tlabel: 'Rectangle',\n\t\t\tinputClassName: 'paint__input',\n\t\t\tlabelClassName: 'paint__label',\n\t\t},\n\t\t{\n\t\t\tid: 3,\n\t\t\ttype: 'radio',\n\t\t\tvalue: 'selection',\n\t\t\tlabel: 'Selection',\n\t\t\tinputClassName: 'paint__input',\n\t\t\tlabelClassName: 'paint__label',\n\t\t},\n\t];\n\n\tconst typesElementsInputsMarkup = typesElementsInputsData.map((item) => (\n\t\t<label\n\t\t\tkey={item.id}\n\t\t\tclassName={item.labelClassName}\n\t\t>\n\t\t\t{item.label}\n\t\t\t<input \n\t\t\t\ttype={item.type}\n\t\t\t\tchecked={tool === item.value}\n\t\t\t\tonChange={handleChangeTool}\n\t\t\t\tvalue={item.value}\n\t\t\t\tclassName={item.inputClassName}\n\t\t\t/>\n\t\t</label>\n\t));\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"paint\"\n\t\t>\n\t\t\t<fieldset\n\t\t\t\tclassName=\"paint__inputs-fieldset\"\n\t\t\t>\n\t\t\t\t<legend\n\t\t\t\t\tclassName=\"paint__inputs-legent\"\n\t\t\t\t>\n\t\t\t\t\tShapes:\n\t\t\t\t</legend>\n\t\t\t\t{typesElementsInputsMarkup}\n\t\t\t</fieldset>\n\t\t\t<canvas \n\t\t\t\tid='canvas'\n\t\t\t\twidth={window.innerWidth}\n\t\t\t\theight={window.innerHeight}\n\t\t\t\tonMouseDown={handleMouseDown}\n\t\t\t\tonMouseMove={handleMouseMove}\n\t\t\t\tonMouseUp={handleMouseUp}\n\t\t\t/>\n\t\t</div>\n\t\t\n\t)\n}\n\nexport default Paint;","import React from 'react';\n\nimport Paint from '../Paint/Paint';\n\n\nfunction App() {\n\n\n\n  return (\n    <div className=\"App\">\n      <Paint />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}