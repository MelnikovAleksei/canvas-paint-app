(this["webpackJsonpcanvas-paint-app"]=this["webpackJsonpcanvas-paint-app"]||[]).push([[0],{16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a.n(n),r=a(10),s=a.n(r),c=(a(16),a(11)),l=a(0),o=a(1),u=a(7),p=a(6),f=a(9),d=a(2),y=f.a.generator();function x(e,t,a,n,i,r){var s;switch(r){case"line":s=y.line(t,a,n,i);break;case"rectangle":s=y.rectangle(t,a,n-t,i-a)}return{id:e,x1:t,y1:a,x2:n,y2:i,type:r,roughElement:s}}var b=function(e,t,a,n,i){return Math.abs(e-a)<5&&Math.abs(t-n)<5?i:null},h=function(e,t,a){var n=a.type,i=a.x1,r=a.x2,s=a.y1,c=a.y2;switch(n){case"rectangle":var l=b(e,t,i,s,"top-left"),o=b(e,t,r,s,"top-right"),u=b(e,t,i,c,"bottom-left"),p=b(e,t,r,c,"bottom-right");return l||o||u||p||(e>=i&&e<=r&&t>=s&&t<=c?"inside":null);case"line":var f={x:i,y:s},d={x:r,y:c},y={x:e,y:t},x=v(f,d)-(v(f,y)+v(d,y)),h=b(e,t,i,s,"start"),g=b(e,t,r,c,"end"),m=Math.abs(x)<1?"inside":null;return h||g||m}},v=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},g=function(e,t,a){return a.map((function(a){return Object(p.a)(Object(p.a)({},a),{},{position:h(e,t,a)})})).find((function(e){return null!==e.position}))};var m=function(){var e=i.a.useState([]),t=Object(o.a)(e,2),a=t[0],n=t[1],r=i.a.useState("none"),s=Object(o.a)(r,2),y=s[0],b=s[1],h=i.a.useState("line"),v=Object(o.a)(h,2),m=v[0],j=v[1],w=i.a.useState(null),O=Object(o.a)(w,2),_=O[0],M=O[1];i.a.useLayoutEffect((function(){var e=document.querySelector("#canvas");e.getContext("2d").clearRect(0,0,e.width,e.height);var t=f.a.canvas(e);a.forEach((function(e){var a=e.roughElement;return t.draw(a)}))}),[a]);var N=function(e,t,i,r,s,c){var o=x(e,t,i,r,s,c),u=Object(l.a)(a);u[e]=o,n(u)},C=function(e){var t=e.target.value;j(t)},S=[{id:1,type:"radio",value:"line",label:"Line",inputClassName:"paint__input",labelClassName:"paint__label"},{id:2,type:"radio",value:"rectangle",label:"Rectangle",inputClassName:"paint__input",labelClassName:"paint__label"},{id:3,type:"radio",value:"selection",label:"Selection",inputClassName:"paint__input",labelClassName:"paint__label"}].map((function(e){return Object(d.jsxs)("label",{className:e.labelClassName,children:[e.label,Object(d.jsx)("input",{type:e.type,checked:m===e.value,onChange:C,value:e.value,className:e.inputClassName})]},e.id)}));return Object(d.jsxs)("div",{className:"paint",children:[Object(d.jsxs)("fieldset",{className:"paint__inputs-fieldset",children:[Object(d.jsx)("legend",{className:"paint__inputs-legent",children:"Shapes:"}),S]}),Object(d.jsx)("canvas",{id:"canvas",width:window.innerWidth,height:window.innerHeight,onMouseDown:function(e){var t=e.clientX,i=e.clientY;if("selection"===m){var r=g(t,i,a);if(r){var s=t-r.x1,c=i-r.y1;M(Object(p.a)(Object(p.a)({},r),{},{offsetX:s,offsetY:c})),"inside"===r.position?b("moving"):b("resizing")}}else{var o=x(a.length,t,i,t,i,m);n((function(e){return[].concat(Object(l.a)(e),[o])})),M(o),b("drawing")}},onMouseMove:function(e){var t=e.clientX,n=e.clientY;if("selection"===m){var i=g(t,n,a);e.target.style.cursor=i?function(e){switch(e){case"top-left":case"bottom-right":case"start":case"end":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";default:return"move"}}(i.position):"default"}if("drawing"===y){var r=a.length-1,s=a[r],l=s.x1,o=s.y1;N(r,l,o,t,n,m)}else if("moving"===y){var p=_.id,f=_.x1,d=_.x2,x=_.y1,b=_.y2,h=_.type,v=t-_.offsetX,j=n-_.offsetY;N(p,v,j,v+(d-f),j+(b-x),h)}else if("resizing"===y){var w=_.id,O=_.type,M=function(e,t,a,n){var i=n.x1,r=n.y1,s=n.x2,c=n.y2;switch(a){case"top-left":case"start":return{x1:e,y1:t,x2:s,y2:c};case"bottom-left":return Object(u.a)({x1:e,y2:c,x2:s},"y2",t);case"top-right":return{x1:i,x2:e,y1:t,y2:c};case"bottom-right":case"end":return{x1:i,x2:e,y1:r,y2:t};default:return null}}(t,n,_.position,Object(c.a)(_,["id","type","position"])),C=M.x1,S=M.y1,z=M.x2,E=M.y2;N(w,C,S,z,E,O)}},onMouseUp:function(){if("drawing"===y||"resizing"===y){var e=_.id,t=a[e],n=(t.id,t.type),i=function(e){var t=e.type,a=e.x1,n=e.y1,i=e.x2,r=e.y2;switch(t){case"rectangle":return{x1:Math.min(a,i),x2:Math.max(a,i),y1:Math.min(n,r),y2:Math.max(n,r)};case"line":return a<i||a===i&&n<r?{x1:a,y1:n,x2:i,y2:r}:{x1:i,y1:r,x2:a,y2:n}}}(a[e]),r=i.x1,s=i.y1,c=i.x2,l=i.y2;N(e,r,s,c,l,n)}b("none"),M(null)}})]})};var j=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(m,{})})};s.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(j,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.881925c7.chunk.js.map